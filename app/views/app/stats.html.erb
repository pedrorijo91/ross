<div class="container">

  <div class="row justify-content-center">
    <h1>The Open Source Game</h1>
  </div>

  <div class="row" id="top">
    <div class="col-md-4">
      <div class="row">
        <img src="<%= stats.avatar_url %>" width="200px">
      </div>
      <div class="row">
        <a href="<%= stats.profile_url %>"><%= stats.username %></a> <!-- TODO center text  -->
      </div>
    </div>
    <div class="col-md-4">
      <strong><%= stats.score %></strong> points
    </div>
    <div class="col-md-4">
      <div class="row">
        <img src="https://i.pinimg.com/originals/41/36/16/41361625cc44df07f81a620eac766468.png" width="150px">
      </div>
      <div class="row">
        share <!-- TODO center text https://getbootstrap.com/docs/4.1/utilities/text/ -->
      </div>
    </div>
  </div>

  <br>
  <br>

  <div class="row" id="main">
    <div class="col-md-9">
      <ul class="nav nav-tabs" id="myTab" role="tablist">

        <li class="nav-item">
          <a class="nav-link active" id="personal-tab" data-toggle="tab" href="#personal" role="tab" aria-controls="personal" aria-selected="true">Personal</a>
        </li>

        <!-- TODO nao escala para muitas organizacoes: crop name? -->
        <% stats.orgs_user_belong.sort.each do |org| %>
          <li class="nav-item">
            <a class="nav-link" id="org-<%= org %>-tab" data-toggle="tab" href="#org-<%= org %>" role="tab" aria-controls="org-<%= org %>" aria-selected="false">
              <%= org %> <span class="badge badge-light">org</span>
            </a>
          </li>
        <% end %>

      </ul>

      <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="personal" role="tabpanel" aria-labelledby="personal-tab">
          <% stats.repos.sort_by {|repo| repo.score}.reverse[0..9].each_with_index do |repo, idx| %>
            <div class="row">
              <span class="col-md-6">
                #<%= idx + 1 %> <a href="<%= repo.url %>"><%= stats.username %>/<%= repo.name %></a>
              </span>
              <span class="col-md-2">
                <i class="fas fa-bullseye"></i> <%= repo.score %>
              </span>
              <span class="col-md-2">
                <i class="far fa-star"></i> Ô∏è<%= repo.stars %>
              </span>
              <span class="col-md-2">
                <i class="fas fa-code-branch"></i> <%= repo.forks %>
              </span>
            </div>
          <% end %>

          <% (10 - stats.repos.size).times do |index| %>
            <div class="row">
            <span class="col-md-7">
              #<%= stats.repos.size + index + 1 %> -
            </span>
              <span class="col-md-1 offset-md-2">
              <i class="fas fa-bullseye"></i> -
            </span>
              <span class="col-md-1">
              <i class="far fa-star"></i> -
            </span>
              <span class="col-md-1">
              <i class="fas fa-code-branch"></i> -
            </span>
            </div>
          <% end %>

        </div>

        <% stats.orgs_user_belong.each do |org| %>
          <div class="tab-pane fade" id="org-<%= org %>" role="tabpanel" aria-labelledby="org-<%= org %>-tab">
            <!-- TODO garantir 10 linhas -->
            Soon :) <!-- TODO org repos -->
          </div>
        <% end %>

      </div>

    </div>
    <div class="col-md-3">
      <p>Top languages:</p>
      <% stats.languages.sort_by {|_key, value| value}.reverse[0..9].each_with_index do |lang, idx| %>
        #<%= idx + 1 %> <%= lang[0] %>

        <% if ActionController::Base.helpers.resolve_asset_path(lang[0].downcase + "-lang-icon.svg") %>
          <%= image_tag(lang[0].downcase + "-lang-icon.svg", width: '20px') %>
        <% end %>

        <br/>

      <% end %>

      <% (10 - stats.languages.size).times do |index| %>
        #<%= stats.languages.size + index + 1 %> - <br/>
      <% end %>
    </div>
  </div>

  <br>
  <br>

  <div class="row" id="bottom">
    <div class="col-md-9"><a href="https://pedrorijo.com/">pedrorijo.com</a></div>
    <div class="col-md-3">
      <!-- TODO no blue icons -->
      <a href="https://www.linkedin.com/in/pedrorijo91/"><i class="fab fa-linkedin fa-lg"></i></a>
      <a href="https://twitter.com/pedrorijo91"><i class="fab fa-twitter fa-lg"></i></a>
      <a href="https://github.com/pedrorijo91"><i class="fab fa-github fa-lg"></i></a>
      <a href="https://stackoverflow.com/users/4398050/pedrorijo91"><i class="fab fa-stack-overflow fa-lg"></i></a>
    </div>
  </div>

</div>